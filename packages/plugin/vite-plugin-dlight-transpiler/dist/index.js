import{parseDlightFile as i}from"@dlightjs/transpiler";import u from"babel-plugin-optional-this";import{transformSync as l}from"@babel/core";var f={plugins:[u(),["@babel/plugin-syntax-typescript",{isTSX:!0}],"@babel/plugin-syntax-jsx","@babel/plugin-syntax-do-expressions",["@babel/plugin-syntax-decorators",{legacy:!0}]]};function e(n){return l(n,f).code}function x({jsd:n=!0,jsx:a=!0,optionalThis:r=!1}={}){return{name:"dlight",enforce:"pre",config(t){return{...t,esbuild:{...t.esbuild,include:/\.(js|ts|jsd|tsd|jsx|tsx)$/,loader:"ts"}}},transform(t,s){return n&&(s.endsWith(".jsd")||s.endsWith(".tsd")||s.endsWith(".view.js")||s.endsWith(".view.ts"))?(r&&(t=e(t)),i(t,"jsd")):a&&(s.endsWith(".jsx")||s.endsWith(".tsx"))?(r&&(t=e(t)),i(t,"jsx")):t}}}export{x as default};
